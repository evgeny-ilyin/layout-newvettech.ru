@use '../../abstracts' as *;

// расположение элементов по окружности только для десктопа
.accordion-circle {
	// .accordion-circle__center
	&__center {
		display: none;
	}

	@include resp-from(desktop) {
		--radius-small: min(12.5vw, 225px);
		--radius-mid: min(16vw, 275px);
		--radius-big: min(25vw, 447px);
		--radius-item: min(14vw, 250px);
		--min-height: 42px;
		--crop-height: 85px;
		--img-size: min(21vw, 380px);
		display: grid;
		grid-template-areas: 'layer';
		width: calc(2 * var(--radius-big));
		height: calc(2 * var(--radius-big) - 2 * var(--crop-height));
		margin: 0 auto;
		background-image:
			url('../img/accordion-circle-1.svg'), url('../img/accordion-circle-2.svg'), url('../img/accordion-circle-3.svg');
		background-repeat: no-repeat, no-repeat, no-repeat;
		background-position: center, center, center;
		background-size: calc(2 * var(--radius-small)), calc(2 * var(--radius-mid)), calc(2 * var(--radius-big));
		justify-items: center;

		/* stylelint-disable-next-line selector-class-pattern */
		.accordion__item {
			--width: 450px;
			// Decimal value, 0-1 based on the child's index.
			--d: calc(var(--i) / var(--total));
			// Offset to get better starting placement on the circle
			--r-offset: -0.2turn;
			// Full circle
			--r-amount: 1turn;
			// Rotation based on the decimal and r modifiers
			--r: calc((var(--r-amount) * var(--d)) + var(--r-offset));
			// Rotate, transform out, then negative rotation so the content appears upright
			--transform: rotate(var(--r)) translate(var(--radius-item)) rotate(calc(-1 * var(--r)));
			display: grid;
			grid-area: layer;
			position: absolute;
			top: calc(var(--radius-big) - var(--crop-height) - var(--min-height) / 2);
			transform: var(--transform);
			z-index: var(--z);
			width: var(--width);
			margin-left: calc(var(--shift) * var(--width));
			place-items: center;
		}

		.js-accordion-trigger {
			flex-direction: var(--fd, row);
			padding: 5px 20px;
			font-size: rem(20);

			&::before {
				--arrow-width: 13px;
				--arrow-margin: 0;
				display: block;
				background: currentcolor;
				border: 0;
				border-radius: 50%;
			}
		}

		// .accordion-circle__center
		&__center {
			display: block;

			img {
				width: var(--img-size);
				border-radius: 50%;
				user-select: none;
			}

			@include flex-center;
		}
	}
}
